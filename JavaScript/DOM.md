# DOM이란?

DOM이란 HTML 문서의 계층적 구조와 정보를 표현하며
이를 제어할 수 있는 API,
즉 프로퍼티와 메서드를 제공하는
트리 자료구조를 의미한다.

# DOM을 구성하는 노드 객체

Critical Rendering Path의 첫단계를 통해
데이터들이 파싱되어 DOM을 구성하는
요소 노드 객체로 변환이 된다.

HTML 문서를 구성하는 개별적인 요소를
HTML 요소라고 부르며,
해당 요소의 어트리뷰트는 어트리뷰트 노드로,
텍스트 콘텐츠는 텍스트 노드로 변환이 된다.

해당 HTML 요소는
중첩 관계에 의해
계층적인 부자 관계가 형성된다.

다음과 같은 노드 객체들로
구성된 트리 자료구조를
DOM 또는 DOM 트리라고 부른다.

## 노드 객체의 종류

노드 객체는 총 12개의 종류가 있지만
이 중에서 중요한 4가지
노드 타입이 존재한다.

1. 문서 노드
   - DOM 트리의 최상위 존재하는 루트 노드로서 document 객체를 가리킨다.
   - HTML 문서당 document 객체는 유일하다
   - 즉, DOM 트리에 접근하기 위해 처음 접근하는 시작점이다.
2. 요소 노드
   - 특정 HTML 요소를 가리키는 객체다.
   - HTML 요소 간의 중첩을 통해 부자 관계를 가지며 해당 구조를 통해 정보를 구조화한다.
3. 어트리뷰트 노드

   - HTML 요소의 어트리뷰트를 가리키는 객체다.
   - 요소 노드와 연결되어 있으며, 지정된 어트리뷰트가 요소로 표현된다.

4. 텍스트 노드
   - HTML 요소의 텍스트를 가리키는 객체다.
   - 말 그대로 문서의 정보를 표현한다.

## DOM API

해당 노드 타입에 따라 필요한 기능을
프로퍼티와 메서드의 집합인 DOM API로 제공한다.

DOM API를 통해
HTML의 구조나 내용 또는 스타일 등을
동적으로 조작할 수 있다.

1. 특정 한 요소만 반환하는 메서드

- getElementById : id 어트리뷰트 값으로 요소 노드를 탐색 후 반환한다.
- querySelector : css 요소를 통해 하나의 요소 노드를 탐색 후 반환한다.

2. 모든 요소를 반환하는 메서드

- getElementByTagName : 태그 값을 통해 모든 요소 노드들을 탐색 후 반환한다.
- getElementByClassName : class 어트리뷰트 값을 통해 모든 요소 노드들을 탐색후 반환한다.
- querySelectorAll : css 요소를 통해 모든 요소 노드를 탐색 후 반환한다.

## 요소 노드의 텍스트 조작

지금까지 언급된 프로퍼티는
모드 읽기 전용 접근자 프로퍼티다

다음과 같은 프로퍼티를 통해
요소 노드의 텍스트를 조작할 수 있다.

### nodeValue

Node.prototype.nodeValue는
getter와 setter가 모두 존재하는
접근자 프로퍼티이다.

### textContent

setter와 getter 모두 존재하는 접근자 프로퍼티로서
요소 노드의 텍스트와
모든 자손 노드의 텍스트를
모두 취득하거나 변경한다.

### innerText를 지양하는 이유

textContent 프로퍼티와 유사한 동작을 하는
innerText 프로퍼티가 있다.

하지만 다음과 같은 이유들로 인해
사용이 지양된다.

1. css에 의해 비표시(visibility: hidden;)로 지정된 요소에 접근할 수 없다.
2. css를 고려하며 작동하기 때문에 textContent보다 느리다.

## DOM 조작

DOM 조작은 새로운 노드를 생성하여
DOM에 추가하거나
기존 노드를 삭제 또는 교체할 때 사용된다.

### innerHTML

innerHTML은
setter와 getter 모두 존재하는 접근자 프로퍼티로서
요소 노드의 HTML 마크업을 취득하거나 변경한다.

구현이 간단하고 직관적이라는 장점이 있지만
그에 따른 단점도 존재한다.

해당 방식은 크로스 사이트 스크립팅 공격에
매우 취약하다.

- 크로스 사이트 스크립팅 공격(XSS: Cross-Site Scripting Attacks) : 악의적인 의도로 특정 사이트에 스크립트를 넣는 기법이다. 해당 공격에 성공하면 의도치 않은 행동을 수행하거나 쿠키나 세션 토큰 등의 민감한 정보를 탈취한다.

### insertAdjacentHTML 메서드

insertAdjacentHTML 메서드는
기존 요소를 제거하지 않으면서
위치를 지정해 새로운 요소를 삽입한다.

첫 번째 인수로 전달한 위치에
두 번째 인수로 전달한 HTML 마크업 문자열을
파싱하여 DOM에 반영한다.

- 첫번째 인수 : beforebegin, afterbegin, beforeend, afterend

## 어트리뷰트

HTML 어트리뷰트는
HTML 요소의 초기 상태를 지정하는데 사용한다.

지정한 어트리뷰트 값은
HTML 요소의 초기 상태를 의미하며
해당 값은 변하지 않는다.

data 어트리뷰트와 dataset 프로퍼티를 사용하면
HTML 요소에 정의한 사용자 정의 어트리뷰트와
자바스크립트 간에 데이터를 교환할 수 있다.

## 스타일

style 프로퍼티는
setter와 getter 모두 존재하는 접근자 프로퍼티이며
요소 노드의 인라인 스타일을 취득하거나
추가 또는 변경한다.

# 참고한 자료

- 모던 자바스크립트 Deep Dive
- [https://poiemaweb.com/js-dom](https://poiemaweb.com/js-dom)
